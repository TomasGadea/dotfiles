#!/bin/bash

ARG=${1:-algrano}

if [ "$ARG" == "algrano" ]; then
    tmux new-session -d -s algrano -n dj
    tmux send-keys -t algrano:dj "dj" Enter

    tmux new-window -t algrano -n dagster
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dagster" Enter
    tmux send-keys -t algrano "nvim ." Enter
    tmux split-window -v -t algrano
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dagster" Enter
    tmux send-keys -t algrano "source .venv/bin/activate" Enter

    tmux new-window -t algrano -n dlt
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dlt" Enter
    tmux send-keys -t algrano "nvim ." Enter
    tmux split-window -v -t algrano
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dlt" Enter
    tmux send-keys -t algrano "source .venv/bin/activate" Enter

    tmux new-window -t algrano -n dbt
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dbt" Enter
    tmux send-keys -t algrano "nvim ." Enter
    tmux split-window -v -t algrano
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dbt" Enter
    tmux send-keys -t algrano "source .venv/bin/activate" Enter

    tmux select-window -t algrano:1
    tmux attach -t algrano

elif [ "$ARG" == "master" ]; then
    tmux new-session -d -s master -n dj
    tmux send-keys -t master:dj "dj" Enter

    tmux new-window -t master
    tmux send-keys -t master "master" Enter

    tmux select-window -t master:2
    tmux attach -t master

else
    echo "tmux-init for '$ARG' not defined"
    exit 1
fi
