#!/bin/bash

ARG=${1:-algrano}

if [ "$ARG" == "algrano" ]; then
    tmux new-session -d -s algrano -n dj
    tmux send-keys -t algrano:dj "dj" Enter

    tmux new-window -t algrano -n dagster
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dagster" Enter
    tmux send-keys -t algrano "nvim ." Enter
    tmux split-window -v -t algrano
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dagster" Enter
    tmux send-keys -t algrano "source .venv/bin/activate" Enter

    tmux new-window -t algrano -n dlt
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dlt" Enter
    tmux send-keys -t algrano "nvim ." Enter
    tmux split-window -v -t algrano
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dlt" Enter
    tmux send-keys -t algrano "source .venv/bin/activate" Enter

    tmux new-window -t algrano -n dbt
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dbt" Enter
    tmux send-keys -t algrano "nvim ." Enter
    tmux split-window -v -t algrano
    tmux send-keys -t algrano "cd /Users/tomas/repositories/algrano/data/warehouse/algrano-data-warehouse-dbt" Enter
    tmux send-keys -t algrano "source .venv/bin/activate" Enter

    tmux select-window -t algrano:1
    tmux attach -t algrano

elif [ "$ARG" == "master" ]; then
    tmux new-session -d -s master -n dj
    tmux send-keys -t master:dj "dj" Enter

    tmux new-window -t master
    tmux send-keys -t master "master" Enter

    tmux select-window -t master:2
    tmux attach -t master

elif [ "$ARG" == "lts4" ]; then
    tmux new-session -d -s lts4 -n dj
    tmux send-keys -t lts4:dj "dj" Enter

    tmux new-window -t lts4 -n notes
    tmux send-keys -t lts4:notes "cd /Users/tomas/Documents/master/epfl/lts4/notes" Enter
    tmux send-keys -t lts4:notes "nvim ." Enter
    tmux split-window -v -t lts4:notes
    tmux send-keys -t lts4:notes "cd /Users/tomas/Documents/master/epfl/lts4/notes" Enter

    tmux new-window -t lts4 -n papers
    tmux send-keys -t lts4:papers "cd /Users/tomas/Documents/master/epfl/lts4/papers" Enter
    tmux send-keys -t lts4:papers "nvim ." Enter
    tmux split-window -v -t lts4:papers
    tmux send-keys -t lts4:papers "cd /Users/tomas/Documents/master/epfl/lts4/papers" Enter

    tmux new-window -t lts4 -n graphist-code
    tmux send-keys -t lts4:graphist-code "cd /Users/tomas/Documents/master/epfl/lts4/code/MahbodTomas-2026-ExtendingGraphist-sem" Enter
    tmux send-keys -t lts4:graphist-code "nvim ." Enter
    tmux split-window -v -t lts4:graphist-code
    tmux send-keys -t lts4:graphist-code "cd /Users/tomas/Documents/master/epfl/lts4/code/MahbodTomas-2026-ExtendingGraphist-sem" Enter
    tmux send-keys -t lts4:graphist-code "conda activate graphist" Enter

    tmux select-window -t lts4:1
    tmux attach -t lts4

else
    echo "tmux-init for '$ARG' not defined"
    exit 1
fi
